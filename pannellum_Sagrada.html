<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Sagrada Familia - Tour 360</title>

<link rel="stylesheet" href="https://cdn.pannellum.org/2.5/pannellum.css"/>
<script src="https://cdn.pannellum.org/2.5/pannellum.js"></script>

<style>
html, body { margin:0; height:100%; width:100%; overflow:hidden; }
#panorama { width:100%; height:100%; }

/* Popup */
#mediaPopup {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.8);
    justify-content:center;
    align-items:center;
    z-index:999;
}
#mediaPopup img {
    max-width:80%;
    max-height:80%;
    box-shadow:0 0 20px #fff;
}
#mediaPopup span {
    position:absolute;
    top:20px;
    right:30px;
    color:white;
    font-size:30px;
    cursor:pointer;
}

/* Hotspot personalizzato */
.hotspot-button {
    background:rgba(255,255,255,0.8);
    padding:6px 10px;
    border-radius:5px;
    cursor:pointer;
    font-weight:bold;
}
</style>
</head>

<body>

<div id="panorama"></div>

<!-- Popup -->
<div id="mediaPopup">
    <span onclick="closeMedia()">✖</span>
    <img id="popupImage" src="">
</div>

<script>
function openMedia(src){
    document.getElementById("popupImage").src = src;
    document.getElementById("mediaPopup").style.display = "flex";
}
function closeMedia(){
    document.getElementById("mediaPopup").style.display = "none";
}

var scenes = {

"scene1": {
    "type":"equirectangular",
    "panorama":"Sagrada Familia.jpg",
    "hotSpots":[
        {"pitch":0,"yaw":-90,"type":"scene","text":"Facciata della Natività","sceneId":"scene3"},
        {"pitch":0,"yaw":190,"type":"scene","text":"Facciata della Gloria","sceneId":"scene7"}
    ]
},

"scene2": {
    "type":"equirectangular",
    "panorama":"Sagrada Familia 2.jpg",
    "hotSpots":[
        {"pitch":0,"yaw":0,"type":"scene","text":"Esci","sceneId":"scene3"},
        {"pitch":0,"yaw":195,"type":"scene","text":"Cripta","sceneId":"scene8"}
    ]
},

"scene3": {
    "type":"equirectangular",
    "panorama":"Sagrada Familia 3.jpg",
    "hotSpots":[
        {"pitch":-20,"yaw":0,"type":"scene","text":"Torna indietro","sceneId":"scene1"},
        {"pitch":0,"yaw":180,"type":"scene","text":"Entra","sceneId":"scene2"}
    ]
},

"scene4": {
    "type":"equirectangular",
    "panorama":"Sagrada Familia 4.jpg",
    "hotSpots":[
        {"pitch":0,"yaw":0,"type":"scene","text":"Facciata della Gloria","sceneId":"scene7"},
        {"pitch":0,"yaw":-90,"type":"scene","text":"Dettaglio 1","sceneId":"scene5"},
        {"pitch":0,"yaw":-105,"type":"scene","text":"Dettaglio 2","sceneId":"scene6"}
    ]
},

"scene5": {
    "type":"equirectangular",
    "panorama":"Sagrada Familia 5.jpg",
    "hotSpots":[
        {"pitch":0,"yaw":180,"type":"scene","text":"Vai indietro","sceneId":"scene4"},
        {
            "pitch":65,
            "yaw":0,
            "type":"info",
            "createTooltipFunc": function(hotSpotDiv){
                hotSpotDiv.classList.add('hotspot-button');
                hotSpotDiv.innerHTML = "Osserva";
                hotSpotDiv.onclick = function(e){
                    e.stopPropagation();
                    openMedia("Passione di Cristo.jpg");
                };
            }
        }
    ]
},

"scene6": {
    "type":"equirectangular",
    "panorama":"Sagrada Familia 6.jpg",
    "hotSpots":[
        {"pitch":-15,"yaw":125,"type":"scene","text":"Vai indietro","sceneId":"scene4"}
    ]
},

"scene7": {
    "type":"equirectangular",
    "panorama":"Sagrada Familia 7.jpg",
    "hotSpots":[
        {"pitch":0,"yaw":180,"type":"scene","text":"Facciata della Natività","sceneId":"scene1"},
        {"pitch":0,"yaw":0,"type":"scene","text":"Facciata della Passione","sceneId":"scene4"}
    ]
},

"scene8": {
    "type":"equirectangular",
    "panorama":"Sagrada Familia 8.jpg",
    "hotSpots":[
        {"pitch":0,"yaw":180,"type":"scene","text":"Torna indietro","sceneId":"scene2"}
    ]
}

};

pannellum.viewer('panorama', {
    "default":{
        "firstScene":"scene1",
        "sceneFadeDuration":1000,

        "hfov":110,
        "minHfov":50,
        "maxHfov":120,

        "minYaw":-180,
        "maxYaw":180,
        "minPitch":-90,
        "maxPitch":90,

        "orientationOnByDefault":false
    },
    "scenes":scenes,
    "autoLoad":true,
    "draggable":true,
    "mouseZoom":true,
    "touchZoom":true,
    "showFullscreenCtrl":true,
    "showVRCtrl":true
});
</script>

</body>
</html>
